
# Тестовое задание: Упрощённый backend-сервис маркетплейса на NestJS

## 1. Цель

Реализовать упрощённый backend-сервис маркетплейса на **NestJS** с работой через **REST API** и полноценными взаимодействиями с **БД** (PostgreSQL или любая другая реляционная).

Сервис должен позволять:

- управлять товарами продавцов;
- оформлять заказы покупателями;
- корректно работать с остатками и транзакциями в БД.

## 2. Бизнес-контекст

Упрощённая модель маркетплейса:
- Есть несколько продавцов.
- Каждый продавец создаёт товары.
- Каждый товар имеет складской остаток.
- Покупатель может оформить заказ, содержащий товары разных продавцов.
- При создании заказа остатки должны уменьшаться **атомарно**, в рамках транзакции.

## 3. Требования к стеку

### Обязательно:
- Node.js (LTS)
- NestJS
- ORM: TypeORM / Prisma / Sequelize
- PostgreSQL или другая SQL-БД

### Желательно:
- Миграции
- Минимальные тесты

## 4. Модель данных

### Seller
- id
- name
- createdAt, updatedAt

### Product
- id
- sellerId
- title
- price
- stock
- isActive
- createdAt, updatedAt

### Order
- id
- buyerEmail
- status
- totalAmount
- createdAt, updatedAt

### OrderItem
- id
- orderId
- productId
- price
- quantity
- subtotal

## 5. Требования к API

### Продавцы
POST /sellers

### Товары
POST /products  
PATCH /products/:id  
GET /products  

### Заказы
POST /orders  
GET /orders/:id  
GET /orders  
PATCH /orders/:id/cancel  

## 6. Нефункциональные требования

- Модули NestJS
- Корректная обработка ошибок
- Миграции или SQL-скрипты
- Swagger или README API
- Инструкция по запуску

## 7. Плюсы
- Тесты
- Docker
- Логирование
- Транзакции и блокировки

## 8. Ожидаемый результат
- GitHub/GitLab репозиторий
- README
- Миграции
- Краткое описание упрощений
